<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.machine.service.data.tag.dao.mapper.DataTagMapper">

    <select id="selectPage" resultType="com.machine.service.data.tag.dao.mapper.entity.DataTagEntity">
        SELECT tdt.*
        FROM t_data_tag tdt
        <where>
            <if test="inputDto.categoryIdSet != null  and inputDto.categoryIdSet.size > 0">
                AND tdt.category_id IN
                <foreach item="item" collection="inputDto.categoryIdSet" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="inputDto.name != null and inputDto.name != ''">
                AND tdt.name LIKE CONCAT('%', #{inputDto.name}, '%')
            </if>
            <if test="inputDto.code != null and inputDto.code != ''">
                AND tdt.code LIKE CONCAT('%', #{inputDto.code}, '%')
            </if>
            <if test="inputDto.status != null">
                AND tdt.status = #{inputDto.status}
            </if>
            <if test="inputDto.createUserIdSet != null and inputDto.createUserIdSet.size > 0  ">
                AND tdt.create_by IN
                <foreach item="item" collection="inputDto.createUserIdSet" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="inputDto.updateUserIdSet != null and inputDto.updateUserIdSet.size > 0  ">
                AND tdt.update_by IN
                <foreach item="item" collection="inputDto.updateUserIdSet" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
        ORDER BY tdt.category_id ,tdt.sort DESC
    </select>

</mapper>
